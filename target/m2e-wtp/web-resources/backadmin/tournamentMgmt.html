<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>
		傲赴云-管理系统
	</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">
	<link rel="icon" href="../img/analysis/auf_title.png" type="image/x-icon"/>
	<link rel="stylesheet" type="text/css" href="../css/justin_common.css">
	<link rel="stylesheet" type="text/css" href="../css/justin_mobile_common.css">
	<link rel="stylesheet" type="text/css" href="../css/button.min.css">	
	<link rel="stylesheet" href="../css/fakeLoader.min.css">
	<link href="../css/jquery-ui.dialog.1.11.4.min.css" rel="stylesheet" type="text/css">
	
	<script src="assets/javascripts/1.3.0/modernizr-jquery.min.js" type="text/javascript"></script>
	<!-- <script src="assets/javascripts/1.3.0/adminflare-demo.min.js" type="text/javascript"></script> -->
	<script src="assets/javascripts/1.3.0/bootstrap.min.js"	type="text/javascript"></script>
	<script src="assets/javascripts/1.3.0/adminflare.min.js" type="text/javascript"></script>
	
	
	<script src="assets/javascripts/vue.min.js" type="text/javascript"></script>
	<script src="../js/jquery-1.11.2.min.js" type="text/javascript"></script>
	<script src="../mobile/js/lib/underscore-min.js" type="text/javascript"></script>
	<script src="assets/javascripts/1.3.0/adminflare-demo-init.min.js" type="text/javascript"></script>	
	<script src="../js/jqBootstrapValidation.js" type="text/javascript"></script>
	<script src="assets/javascripts/axios.js"></script>
	<script src="../i18n/env.js"></script>
	<script src="../js/jquery-ui.dialog.1.11.4.min.js" type="text/javascript"></script>
	
	<script src="../js/fakeLoader.min.js" type="text/javascript"></script>
	<script src="../js/tournamentBackEndMgmt.js" type="text/javascript"></script>
	<script src="../js/justin_common.js" type="text/javascript"></script>
	
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,300,600,700" rel="stylesheet" type="text/css">
	<script type="text/javascript">
		// Include Bootstrap stylesheet 
		document.write('<link href="assets/css/' + DEMO_ADMINFLARE_VERSION + '/' + DEMO_CURRENT_THEME + '/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" id="bootstrap-css">');
		// Include AdminFlare stylesheet 
		document.write('<link href="assets/css/' + DEMO_ADMINFLARE_VERSION + '/' + DEMO_CURRENT_THEME + '/adminflare.min.css" media="all" rel="stylesheet" type="text/css" id="adminflare-css">');
		// Include AdminFlare page stylesheet 
		document.write('<link href="assets/css/' + DEMO_ADMINFLARE_VERSION + '/pages.min.css" media="all" rel="stylesheet" type="text/css">');
	</script>
	
</head>
<body id="app" class="pages-messages" v-cloak>
<script type="text/javascript">demoSetBodyLayout();</script>
	<header class="navbar navbar-fixed-top" id="main-navbar">
		<div class="navbar-inner">
			<div class="container">
				<img id="tournamentLogo" onerror="this.style.display='none'"  style="float: left;margin: 6px 0px 0px 5px;width: 28px;height: 28px;">
				<a class="logo" style="font-size: 16px;padding-top: 5px;color: aliceblue;" href="#"><img alt="Af_logo" src="../img/common/home_icon_black.png" style="width:35px;height:35px;"></a>
				<a class="btn nav-button collapsed" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-reorder"></span>
				</a>

				<div class="nav-collapse collapse">
					<ul class="nav">
						<li class="active"><a href="#">管理</a></li>
						<li class="divider-vertical"></li>
					</ul>
					<ul class="nav pull-right">
						<li class="separator"></li>
						<li class="dropdown">
							<img onerror="this.style.display='none'" class="headIcon" src="../img/common/admin_spy.png" style="margin: 3px 0 0 1px;">
							<a href="#" class="dropdown-toggle usermenu" data-toggle="dropdown"> 
								<span id="adminName" style="width: 100px;display: block;">管理员名</span>
							</a>
							<ul class="dropdown-menu">
								<li><a onclick="updatePwdPopup();" href="#">修改密码</a></li>
								<li class="divider"></li>
								<li><a onclick="loginOut();" href="/footballer/backadmin/tournamentMgmt.html" >登出</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</header>
	
	<div id="dialog-form" title="请先登陆"  style="display:none;">
		  <p class="validateTips"></p>
		 
		  <form>
		    <fieldset>
		      <div class="HBox">
		      	<label for="name" class="forInput">用户</label>
		      	<input type="text" name="name" id="name"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <br>
		      <div class="HBox">
		      	<label for="password" class="forInput">密码</label>
		      	<input type="password" name="password" id="password"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <!-- Allow form submission with keyboard without duplicating the dialog button -->
		      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
		      
		    </fieldset>
		  </form>
	</div>
	
	<div id="dialog-updatePwd" title="修改密码"  style="display:none;">
		  <p class="validateTips"></p>
		 
		  <form>
		    <fieldset>
		      <div class="HBox">
		      	<label for="newPwd" class="forInput">新密码</label>
		      	<input type="password" name="newPwd" id="newPwd"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <br>
		      <div class="HBox">
		      	<label for="confirmPwd" class="forInput">确认密码</label>
		      	<input type="password" name="confirmPwd" id="confirmPwd"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <!-- Allow form submission with keyboard without duplicating the dialog button -->
		      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
		    </fieldset>
		  </form>
	</div>

	<section class="container">
	
		
		
		
	
		<h4>
			<img onerror="this.style.display='none'" class="headIcon" src="../img/common/reservationIcon.png" style="margin: -7px 10px 0px 0px;">
			数据
		</h4>
	
		<section class="row-fluid" style="border: 1px solid white;padding: 5px;">
			<div class="box">
			
				<!-- 比分 -->
			
				<div class="control-group divInLineFlex">
					<label class="control-label" for="match" style="padding: 5px;font-size: 16px;">球队</label>	
					<select id="match" placeholder="轮次" v-model="selectedRound" style="width:400px;">
						<option selected="selected">请选择轮次</option>
						<option v-for="option in roundList" v-bind:value="option.name">
							   第{{option.name}}轮
						</option>
					</select>
					
				</div>
				
				<button v-if="selectRoundMatches" v-on:click="saveTeamMatchRecord" class="btn btn-primary">提交<i class="icon-ok icon-white"></i></button><br>
				<ul v-for="m in selectRoundMatches">
					<li>
						<!-- <div class="divInLineFlex" data-matchId="{{m.id}}" data-hostTeamId="{{m.hostTeamId}}" data-guestTeamId="{{m.guestTeamId}}" >
							<label class="p5 fs18 fontBolder">{{m.name}}</label>
							<label class="p5 fs18 txtAg-c" style="width:200px;">{{m.hostTeamLabel}}</label>
							<input v-model="m.hostGoals" class="txtAg-c" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)">
							<label class="p5 fs18">-</label>
							<input v-model="m.guestGoals" class="txtAg-c" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)">
							<label class="p5 fs18 txtAg-c" style="width:200px;">{{m.guestTeamLabel}}</label>
						</div> -->
						
						<table class="txtAg-c">
					 	<tr v-if="$index == 0" >
					 		<td>球队</td>
						 	<td v-if="statsContent.goals">进球</td>
						 	
						 	<td v-if="statsContent.shots">射门</td>
						 	<td v-if="statsContent.longShots">远射</td>
						 	<td v-if="statsContent.shotsOnTarget">射正</td>
						 	
						 	<td v-if="statsContent.pass">传球</td>
						 	<td v-if="statsContent.longPass">长传</td>
						 	<td v-if="statsContent.passFinalBall">威胁传球</td>
						 	<td v-if="statsContent.passCompleted">完成传球</td>
						 	
						 	<td v-if="statsContent.assists">助攻</td>
						 	
						 	<td v-if="statsContent.tackles">抢断</td>
						 	<td v-if="statsContent.block">拦截</td>
						 	<td v-if="statsContent.keyDefense">关键防守</td>
						 	<td v-if="statsContent.save">扑救</td>
						 	
						 	<td v-if="statsContent.loosePossession">失去球权</td>
						 	<td v-if="statsContent.distanceCoverd">跑动距离</td>
						 	
						 	<td v-if="statsContent.offside">越位</td>
						 	<td v-if="statsContent.fouls">犯规</td>
						 	
						 	<td v-if="statsContent.yellowCard">黄牌</td>
						 	<td v-if="statsContent.redCard">红牌</td>
						 	<td v-if="statsContent.ownGoals">乌龙</td>
						 	<td v-if="statsContent.penalty">点球</td>
						 	<!-- <td v-if="statsContent.mvp">MVP</td> -->
					 	</tr>
					 	<tbody>
					 		<tr data-teamId={{m.hostTeamId}}>
					 			<td style="width: 200px;">
					 				<label style="font-size:15px;padding-left: 5px;">{{m.hostTeamLabel}}</label>		
					 			</td>
					 			<td v-if="statsContent.goals">
									<input class="txtAg-c" v-model="m.hostGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shots">
					 				<input class="txtAg-c" v-model="m.hostShots" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.longShots">
					 				<input class="txtAg-c" v-model="m.hostLongShots"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shotsOnTarget">
					 				<input class="txtAg-c" v-model="m.hostShotsOnTarget"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.pass">
					 				<input class="txtAg-c" v-model="m.hostPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>	
					 			</td>
					 			<td v-if="statsContent.longPass">
					 				<input class="txtAg-c" v-model="m.hostLongPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passFinalBall">
					 				<input class="txtAg-c" v-model="m.hostPassFinalBall"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passCompleted">
					 				<input class="txtAg-c" v-model="m.hostPassCompleted"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.assists">
					 				<input class="txtAg-c"  v-model="m.hostAssists" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.tackles">
					 				<input class="txtAg-c" v-model="m.hostTackles"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.block">
					 				<input class="txtAg-c" v-model="m.hostBlock" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.keyDefense">
					 				<input class="txtAg-c" v-model="m.hostKeyDefense" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.save">
					 				<input class="txtAg-c" v-model="m.hostSave" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.loosePossession">
					 				<input class="txtAg-c" v-model="m.hostLoosePossession" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.distanceCoverd">
					 				<input class="txtAg-c"  v-model="m.hostDistanceCoverd" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.offside">
					 				<input class="txtAg-c" v-model="m.hostOffside" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.fouls">
					 				<input class="txtAg-c" v-model="m.hostFouls" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.yellowCard">
					 				<input class="txtAg-c" v-model="m.hostYellowCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.redCard">
					 				<input class="txtAg-c" v-model="m.hostRedCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.ownGoals">
					 				<input class="txtAg-c" v-model="m.hostOwnGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.penalty">
					 				<input class="txtAg-c" v-model="m.hostPenalty" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 		</tr>
					 		
					 		<tr  data-teamId={{m.guestTeamId}}>
					 			<td style="width: 200px;">
					 				<label style="font-size:15px;padding-right: 5px;">{{m.guestTeamLabel}}</label>		
					 			</td>
					 			<td v-if="statsContent.goals">
									<input class="txtAg-c" v-model="m.guestGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shots">
					 				<input class="txtAg-c" v-model="m.guestShots" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.longShots">
					 				<input class="txtAg-c" v-model="m.guestLongShots"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shotsOnTarget">
					 				<input class="txtAg-c" v-model="m.guestShotsOnTarget"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.pass">
					 				<input class="txtAg-c" v-model="m.guestPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>	
					 			</td>
					 			<td v-if="statsContent.longPass">
					 				<input class="txtAg-c" v-model="m.guestLongPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passFinalBall">
					 				<input class="txtAg-c" v-model="m.guestPassFinalBall"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passCompleted">
					 				<input class="txtAg-c" v-model="m.guestPassCompleted"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.assists">
					 				<input class="txtAg-c"  v-model="m.guestAssists" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.tackles">
					 				<input class="txtAg-c" v-model="m.guestTackles"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.block">
					 				<input class="txtAg-c" v-model="m.guestBlock" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.keyDefense">
					 				<input class="txtAg-c" v-model="m.guestKeyDefense" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.save">
					 				<input class="txtAg-c" v-model="m.guestSave" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.loosePossession">
					 				<input class="txtAg-c" v-model="m.guestLoosePossession" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.distanceCoverd">
					 				<input class="txtAg-c"  v-model="m.guestDistanceCoverd" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.offside">
					 				<input class="txtAg-c" v-model="m.guestOffside" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.fouls">
					 				<input class="txtAg-c" v-model="m.guestFouls" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.yellowCard">
					 				<input class="txtAg-c" v-model="m.guestYellowCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.redCard">
					 				<input class="txtAg-c" v-model="m.guestRedCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.ownGoals">
					 				<input class="txtAg-c" v-model="m.guestOwnGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.penalty">
					 				<input class="txtAg-c" v-model="m.guestPenalty" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 		</tr>
					 		
					 	</tbody>
					 </table>
					</li>
				</ul>
				
				
				
				
				<!-- 详细数据  -->
				
				<div class="control-group divInLineFlex pt10">
							<label class="control-label" for="match" style="padding: 5px;font-size: 16px;">球员</label>
							<select id="match" placeholder="赛事" v-model="selectedMatch" style="width:400px;">
							  <option selected="selected">请选择比赛</option>
							  <option v-for="option in matchList" v-bind:value="option.id">
							    {{option.displayName}}
							  </option>
							</select>
				</div>
				
				<div id="playerSelectArea" style="display: inline-flex;">
					<div v-if="hostPlayerList">
						<label class="dataLabel" style="padding-left:6px;padding-top: 16px;padding-bottom: 6px;width:120px;font-size: 18px;">确认出场队员</label>
					</div>
					<div style="width: 250px;">
						<div v-if="hostPlayerList"  class="HBox" style="height: 55px;">
							<img id="hostTeamLogo" style="width: 50px; height: 50px;  cursor: pointer;border-radius: 13px;">
       					 	<label id="hostTeam" style="font-size:25px;padding-top: 9px;padding-left: 10px;">Team 1</label>
						</div>
						<div v-if="hostPlayerList" class="divInLineFlex" style="height: 30px;">
							<input type="checkbox" id="allhost" v-model="allHost">
       					 	<label for="allhost" style="color:green;">全勤</label>
						</div> 
						<div v-for="player in hostPlayerList">
       					 	<div class="HBox">
       					 		<input type="checkbox" id="{{player.id}}" value="{{player}}" v-model="selectedHostPlayer">
       					 		<div class="HBox" style="height:35px;">
       					 			
       					 			<img for="{{player.id}}" src="{{player.imgUrl}}" style="width: 30px; height: 30px; margin-top:-5px; cursor: pointer;border-radius: 9px;"> 
									
									<label for="{{player.id}}" style="font-size:15px;padding-right: 5px;">{{player.number}}</label>
									-
									<label for="{{player.id}}" style="font-size:15px;padding-left: 5px;">{{player.name}}</label>	
       					 		</div>
       					 	</div>
     					</div>
					</div>
					<div>
						<div v-if="guestPlayerList" class="HBox" style="height: 55px;">
							<img id="guestTeamLogo" style="width: 50px; height: 50px;  cursor: pointer;border-radius: 13px;">
       					 	<label id="guestTeam" style="font-size:25px;padding-top: 9px;padding-left: 10px;">Team 2</label>
						</div>
						 <div v-if="guestPlayerList" class="divInLineFlex" style="height: 30px;">
							<input type="checkbox" id="all" v-model="allGuest">
       					 	<label for="all" style="color:green;">全勤</label>
						</div> 
						<div v-for="player in guestPlayerList" >
	        				<div class="HBox">
       					 		<input type="checkbox" id="{{player.id}}" value="{{player}}" v-model="selectedGuestPlayer">
       					 		<div class="HBox" style="height:35px;">
       					 			
       					 			<img for="{{player.id}}" src="{{player.imgUrl}}" style="width: 30px; height: 30px; margin-top:-5px; cursor: pointer;border-radius: 9px;"> 
									<label for="{{player.id}}" style="font-size:15px;padding-right: 5px;">{{player.number}}</label>
									-
									<label for="{{player.id}}" style="font-size:15px;padding-left: 5px;">{{player.name}}</label>	
       					 		</div>
       					 	</div>
	     				</div>
					</div>
					<button v-if="hostPlayerList&&guestPlayerList" v-on:click="beginRecord" style="font-size: 16px;margin-left:20px;height: 35px;">开始统计</button>
				</div>
				
				
				<div id="mainArea" style="display:none">
					<button v-on:click="savePlayerMatchRecord" class="btn btn-primary">提交<i class="icon-ok icon-white"></i></button><br>
					 <table class="txtAg-c">
					 	<tr >
					 		<td>头像</td>
					 		<td style="width: 80px;" >名字</td>
					 		<td>号码</td>
						 	<td v-if="statsContent.goals">进球</td>
						 	
						 	<td v-if="statsContent.shots">射门</td>
						 	<td v-if="statsContent.longShots">远射</td>
						 	<td v-if="statsContent.shotsOnTarget">射正</td>
						 	
						 	<td v-if="statsContent.pass">传球</td>
						 	<td v-if="statsContent.longPass">长传</td>
						 	<td v-if="statsContent.passFinalBall">威胁传球</td>
						 	<td v-if="statsContent.passCompleted">完成传球</td>
						 	
						 	<td v-if="statsContent.assists">助攻</td>
						 	
						 	<td v-if="statsContent.tackles">抢断</td>
						 	<td v-if="statsContent.block">拦截</td>
						 	<td v-if="statsContent.keyDefense">关键防守</td>
						 	<td v-if="statsContent.save">扑救</td>
						 	
						 	<td v-if="statsContent.loosePossession">失去球权</td>
						 	<td v-if="statsContent.distanceCoverd">跑动距离</td>
						 	
						 	<td v-if="statsContent.offside">越位</td>
						 	<td v-if="statsContent.fouls">犯规</td>
						 	
						 	<td v-if="statsContent.yellowCard">黄牌</td>
						 	<td v-if="statsContent.redCard">红牌</td>
						 	<td v-if="statsContent.ownGoals">乌龙</td>
						 	<td v-if="statsContent.penalty">点球</td>
						 	<td v-if="statsContent.mvp">MVP</td>
					 	</tr>
					 	<tbody>
					 		<tr v-for="player in selectedHostPlayer" data-playerId={{player.id}} data-teamId={{hostTeamId}}>
					 			<td>
					 				<img for="{{player.id}}" src="{{player.imgUrl}}" style="width: 40px; height: 40px; margin-top:-5px; cursor: pointer;border-radius: 9px;">
					 			</td>
					 			<td style="width: 80px;">
					 				<label for="{{player.id}}" style="font-size:15px;padding-left: 5px;">{{player.name}}</label>		
					 			</td>
					 			<td>
					 				<label for="{{player.id}}" style="font-size:15px;padding-right: 5px;">{{player.number}}</label>		
					 			</td>
					 			<td v-if="statsContent.goals">
									<input class="txtAg-c" v-model="player.goals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shots">
					 				<input class="txtAg-c" v-model="player.shots" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.longShots">
					 				<input class="txtAg-c" v-model="player.longShots"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shotsOnTarget">
					 				<input class="txtAg-c" v-model="player.shotsOnTarget"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.pass">
					 				<input class="txtAg-c" v-model="player.pass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>	
					 			</td>
					 			<td v-if="statsContent.longPass">
					 				<input class="txtAg-c" v-model="player.longPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passFinalBall">
					 				<input class="txtAg-c" v-model="player.passFinalBall"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passCompleted">
					 				<input class="txtAg-c" v-model="player.passCompleted"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.assists">
					 				<input class="txtAg-c"  v-model="player.assists" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.tackles">
					 				<input class="txtAg-c" v-model="player.tackles"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.block">
					 				<input class="txtAg-c" v-model="player.block" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.keyDefense">
					 				<input class="txtAg-c" v-model="player.keyDefense" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.save">
					 				<input class="txtAg-c" v-model="player.save" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.loosePossession">
					 				<input class="txtAg-c" v-model="player.loosePossession" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.distanceCoverd">
					 				<input class="txtAg-c"  v-model="player.distanceCoverd" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.offside">
					 				<input class="txtAg-c" v-model="player.offside" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.fouls">
					 				<input class="txtAg-c" v-model="player.fouls" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.yellowCard">
					 				<input class="txtAg-c" v-model="player.yellowCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.redCard">
					 				<input class="txtAg-c" v-model="player.redCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.ownGoals">
					 				<input class="txtAg-c" v-model="player.ownGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.penalty">
					 				<input class="txtAg-c" v-model="player.penalty" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.mvp">
					 				<input class="txtAg-c" v-model="player.mvp" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>	
					 		</tr>
					 		
					 		<tr>
								<td colspan="100">
									<div>
										<hr style="height:5px;border:none;border-top:3px ridge #347fb9;">
									</div>
								</td>					 		
					 		</tr>
					 		
					 		<tr v-for="player in selectedGuestPlayer" data-playerId={{player.id}} data-teamId={{guestTeamId}}>
					 			<td>
					 				<img for="{{player.id}}" src="{{player.imgUrl}}" style="width: 40px; height: 40px; margin-top:-5px; cursor: pointer;border-radius: 9px;">
					 			</td>
					 			<td style="width: 80px;">
					 				<label for="{{player.id}}" style="font-size:15px;padding-left: 5px;">{{player.name}}</label>		
					 			</td>
					 			<td>
					 				<label for="{{player.id}}" style="font-size:15px;padding-right: 5px;">{{player.number}}</label>		
					 			</td>
					 			<td v-if="statsContent.goals">
									<input class="txtAg-c" v-model="player.goals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shots">
					 				<input class="txtAg-c" v-model="player.shots" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.longShots">
					 				<input class="txtAg-c" v-model="player.longShots"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.shotsOnTarget">
					 				<input class="txtAg-c" v-model="player.shotsOnTarget"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.pass">
					 				<input class="txtAg-c" v-model="player.pass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>	
					 			</td>
					 			<td v-if="statsContent.longPass">
					 				<input class="txtAg-c" v-model="player.longPass"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passFinalBall">
					 				<input class="txtAg-c" v-model="player.passFinalBall"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.passCompleted">
					 				<input class="txtAg-c" v-model="player.passCompleted"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.assists">
					 				<input class="txtAg-c"  v-model="player.assists" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.tackles">
					 				<input class="txtAg-c" v-model="player.tackles"  style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.block">
					 				<input class="txtAg-c" v-model="player.block" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.keyDefense">
					 				<input class="txtAg-c" v-model="player.keyDefense" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.save">
					 				<input class="txtAg-c" v-model="player.save" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.loosePossession">
					 				<input class="txtAg-c" v-model="player.loosePossession" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.distanceCoverd">
					 				<input class="txtAg-c"  v-model="player.distanceCoverd" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.offside">
					 				<input class="txtAg-c" v-model="player.offside" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.fouls">
					 				<input class="txtAg-c" v-model="player.fouls" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.yellowCard">
					 				<input class="txtAg-c" v-model="player.yellowCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.redCard">
					 				<input class="txtAg-c" v-model="player.redCard" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.ownGoals">
					 				<input class="txtAg-c" v-model="player.ownGoals" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.penalty">
					 				<input class="txtAg-c" v-model="player.penalty" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>
					 			<td v-if="statsContent.mvp">
					 				<input class="txtAg-c" v-model="player.mvp" style="width:30px;" value="0" onblur="numberFormat(this)" onfocus="numberInit(this)"></input>
					 			</td>	
					 		</tr>
					 		
					 	</tbody>
					 </table>
				</div>
				
			</div>
		</section>

		<h4 class="mt20">
			<img onerror="this.style.display='none'" class="headIcon" src="../img/common/video1.jpeg" style="margin: -7px 10px 0px 0px;">
			视频
		</h4>
	
		<section class="row-fluid" style="border: 1px solid white;padding: 5px;">
			<div class="span4">			
				<form class="row-fluid" id="validate-form" action="javascript:return;">
						
						<div class="control-group">
							<label class="control-label" for="match" style="padding: 5px;font-size: 16px;">赛事</label>
							<select id="match" placeholder="赛事" v-model="selectedMatch">
							  <option selected="selected">请选择比赛</option>
							  <option v-for="option in matchList" v-bind:value="option.id">
							    {{option.displayName}}
							  </option>
							</select>
						</div>
						
						<div class="control-group">
							<label class="control-label" for="name">视频名称</label>
							<div class="controls">
								<input type="text" name="videoName" id="videoName" required v-model="selectName">
							</div>
						</div>
						
						<div class="control-group">
							<label class="control-label" for="matchType">赛事类型</label>
							<select id="matchType" required placeholder="赛事" v-model="selectedMatchType">
							  <option value="0" selected>集锦</option>
							  <option value="1">最佳</option>
							  <option value="2">花絮</option>
							  <option value="3">全场</option>
							</select>
						</div>

						

						<div class="control-group">
							<label class="control-label" for="date">时间</label>
							<div class="controls">
								<input type="text" name="date" id="date" placeholder="2016-03-21 19:30:00" required v-model="selectDate">
							</div>
						</div>

						<div class="control-group">
							<label class="control-label" for="videoUrl">视频URL <span class="label label-success">{{thumbnailURLMessage}}</span></label>
							<div class="controls">
								<input type="text" name="videoUrl" id="videoUrl" required v-model="selectUrl" v-on:change="changeVideoUrl">
							</div>
						</div>
							
						<div class="control-group">
							<label class="control-label" for="thumbnailURL">缩略图URL</label>							
							<div class="controls">
								<input type="text" name="thumbnailURL" id="thumbnailURL" v-model="selectThumbnailURL">
								<img v-show="selectThumbnailURL" src="{{selectThumbnailURL}}" alt="缩略图" style="width:200px;height:112px;">
							</div>
							
						</div>

						<div class="form-actions" style="margin-bottom: -20px">
							<button type="submit" class="btn btn-primary">{{submitLabel}} <i class="icon-ok icon-white"></i></button><br>
						</div>
					</form>
			</div>

			<div class="span8">
				<div class="box non-collapsible widget-messages" style="height: 400px; overflow: scroll;">
					<div class="message-actions">
						<div class="btn-group">
						</div>
						<button class="btn btn-primary btn-small pull-right">修改<i class="icon-refresh"></i></button>
					</div>

					<div class="message unread" v-for="video in videoList" v-cloak>
						<div class="action-checkbox">
							<input type="radio" name="videoGroup" v-on:change="selectOneVideo(video, $event)">
						</div>
						<a href="#" title="" class="from">{{video.name}}</a>
						<div class="from">
							{{video.displayDate}}
						</div>
						<div class="to">
							{{video.thumbnail}}
						</div>
						
					</div>

				</div>
			</div>
		</section>
		
			
		<footer id="main-footer">
			Copyright © 2015 <!-- <a href="http://www.footballer.cc"> -->成都傲赴体育有限公司 
			all rights reserved. <a href="#" class="pull-right" id="on-top-link">
				On Top &nbsp;<i class="icon-chevron-up"></i>
			</a>
		</footer>
	</section>
</body>


<script type="text/javascript">
function numberInit(e){
	if(e.value == 0){
		e.value = ''
	}
}

function numberFormat(e){
	var value = e.value
	e.value=(parseInt((value=value.replace(/\D/g,''))==''||parseInt((value=value.replace(/\D/g,''))==0)?'0':value,10))
}


function youkuUrlFormatHandler(s){
	//http://v.youku.com/v_show/id_XMTg2NzQ0NDgwNA==.html?spm=a2h0k.8191407.0.0&from=s1.8-1-1.2
	var start = s.indexOf('id_')+3
	var end = s.indexOf('.html')
	var youku_id = s.substring(start,end)
	var youku_url = 'http://player.youku.com/embed/'
	return youku_url+youku_id
}


		window.onload = function () {
			$("input,select,textarea").not("[type=submit]").jqBootstrapValidation(
					{	
						filter: function () {
							return "0" == vue.$data.selectedMatchType;
						},
						submitSuccess: function ($form, event) {
					       var video = {
					    		   id: vue.$data.selectVideoId,
					    		   tournamentId: vue.$data.selectedTournament,
					    		   tournamentMatchId: vue.$data.selectedMatch,
					    		   name : vue.$data.selectName,
					    		   url : youkuUrlFormatHandler(vue.$data.selectUrl),
					    		   displayDate: vue.$data.selectDate,
					    		   typeValue: vue.$data.selectedMatchType,
					    		   thumbnail: vue.$data.selectThumbnailURL    			  
					       }, ajaxUrl = domain + path + 'saveVideoInfo' + suffix;
					       
					       axios.post(ajaxUrl, video)
					    	  .then(function (response) {
					    	    console.log(response);
					    	    vue.$data.selectedMatch = null;
					    	    vue.$data.selectName = null;
					    	    vue.$data.selectUrl = "";
					    	    vue.$data.selectedMatchType = "0";
					    	    vue.$data.selectThumbnailURL = null;
					    	    vue.$data.selectVideoId = null;
					    	    vue.$data.thumbnailURLMessage = "";
					    	    vue.$data.submitLabel = '增加'
					    	    
					    	    vue.queryVideoList();
					    	    alert(vue.$data.mode == '' ? '视频信息增加成功！' : '视频信息修改成功！');
					    	    vue.$data.mode = '';
					    	  })
					    	  .catch(function (error) {
					    	    console.log("视频信息增加错误：", error);
					    	  });
					    }
					}
			);

			var domain = GLOBAL_VAR_DOMAIN + 'footballer/',
			    path = 'api/mobile/v2/tournament-service/',
			    suffix = '/03a68667-05dc-11e6-af3b-00163e021542/100000/e7afdd55291a3e3796a6d3d83e70d6dd',
				getTournamentListUrl = domain + path + 'getAllSportsTournament' + suffix,
				getMatchListUrl,
				tournamentList, 
			    matchList,
			    selectedTournament,
			    vue;

			vue = new Vue({
				el : '#app',
				data : {
					tournamentList: [],
					matchList : [],
					selectedTournament : "",
					selectedMatch : "",
					selectedRound : '',
					videoList : [],
					selectName: "",
		    	    selectUrl: '',
		    	    selectDate : '',
		    	    selectedMatchType: '',
		    	    selectThumbnailURL: '',
		    	    selectVideoId : '',
		    	    mode : '',
		    	   	submitLabel : '增加',
		    	   	thumbnailURLMessage : '',
		    	   	roundLabel:'',
		    	   	hostTeamId:'',
					hostTeamLabel:'',
					guestTeamId:'',
					guestTeamLabel:'',
					hostTeamLogo:'',
					guestTeamLogo:'',
					roundList:[],
					selectRoundMatches:null,
					statsContent:{},
					hostPlayerList:null,
					guestPlayerList:null,
					allHost:false,
					allGuest:false,
					selectedHostPlayer:[],
					selectedGuestPlayer:[],
					allSelectedPlayer:[]
					
				},
				methods : {
					init:function(){
						urlPre = window.localStorage["urlPre"]
				 		iaa = window.localStorage["iaa"]
						vue.$data.selectedTournament = window.localStorage["tournamentId"]
					},
					queryVideoList : function() {
						if (!isNaN(this.selectedTournament)) {
							var url = domain + path + 'getVideoInfoByTournamentId' + `/${this.selectedTournament}` + suffix;
							axios.get(url).then(function (response) {
								//console.log(response);
								vue.$data.videoList = response.data.videos;
							});	
						} else {
							alert("请输入联赛信息");
						}
					},
					selectOneVideo : function(video, event) {
						   //console.log('select video:', video);
			    		   //tournamentId: vue.$data.selectedTournament,
			    		   vue.$data.selectedMatch = video.tournamentMatchId;
			    		   vue.$data.selectName = video.name;
			    		   vue.$data.selectUrl = video.url;
			    		   vue.$data.selectDate = video.displayLongDate;
			    		   vue.$data.selectedMatchType = video.typeValue;
			    		   vue.$data.selectThumbnailURL = video.thumbnail;
			    		   vue.$data.selectVideoId = video.id;
			    		   vue.$data.mode = 'update';
			    		   vue.$data.submitLabel = '修改'
					},
					changeVideoUrl : function() {
						if (isNaN(this.selectedTournament)  || !this.selectUrl) {
							return;
						}
						this.thumbnailURLMessage = "获取缩略图 ...";
						var that = this, 
							apiUrl = domain + path + 'getThumbnailByUrl' + suffix;
							axios.post(apiUrl, {url : this.selectUrl}).then(function (response) {
							console.log(response);							
							that.thumbnailURLMessage = "获取缩略图完成！";
							that.selectThumbnailURL = response.data;
						});	
					},
					saveTeamMatchRecord : function(e){
						//console.log(vue.$data.selectRoundMatches)
						var importTeamDataList = []
						var matchIdsList = [] 
						
						$.each(vue.$data.selectRoundMatches, function(i,v){
							var hostTotalGoals = Number(v.hostGoals) + Number(v.guestOwnGoals)
							var guestTotalGoals = Number(v.guestGoals) + Number(v.hostOwnGoals)
							
							
							if(hostTotalGoals > guestTotalGoals){
								v.hostPoints = 3
								v.guestPoints = 0
							}
							if(hostTotalGoals < guestTotalGoals){
								v.hostPoints = 0
								v.guestPoints = 3
							}
							if(hostTotalGoals == guestTotalGoals){
								v.hostPoints = 1
								v.guestPoints = 1
							}
							
							var hostItem ={
									tournamentMatchId: v.id,
									teamId: v.hostTeamId,
									goals: v.hostGoals,
									points: v.hostPoints, 
							 		conceded: v.guestGoals,
							 		
									shots: v.hostShots,
									longshot: v.hostLongShot,
									shotsOnTarget: v.hostShotsOnTarget,
									
									assists: v.hostAssists,
									pass: v.hostPass,
									longPass: v.hostLongPass,
									passFinalBall: v.hostPassFinalBall,
									passCompleted: v.hostPassCompleted,
							
									save: v.hostSave,
									tackles: v.hostTackles,
									block: v.hostBlock,
									keyDefense: v.hostKeyDefense,
									
									fouls: v.hostFouls,
									yellowCard: v.hostYellowCard,
									redCard: v.hostRedCard,

									loosePossession: v.hostLoosePossession,
									distanceCoverd: v.hostDistanceCoverd,
									
									offside: v.hostOffside,
									ownGoals: v.hostOwnGoals									 
							}
							
							var guestItem ={
									tournamentMatchId: v.id,
									teamId: v.guestTeamId,
									goals: v.guestGoals,
									points: v.guestPoints, 
							 		conceded: v.hostGoals,
							 		
							 		shots: v.guestShots,
									longshot: v.guestLongShot,
									shotsOnTarget: v.guestShotsOnTarget,
									
									assists: v.guestAssists,
									pass: v.guestPass,
									longPass: v.guestLongPass,
									passFinalBall: v.guestPassFinalBall,
									passCompleted: v.guestPassCompleted,
							
									save: v.guestSave,
									tackles: v.guestTackles,
									block: v.guestBlock,
									keyDefense: v.guestKeyDefense,
									
									fouls: v.guestFouls,
									yellowCard: v.guestYellowCard,
									redCard: v.guestRedCard,

									loosePossession: v.guestLoosePossession,
									distanceCoverd: v.guestDistanceCoverd,
									
									offside: v.guestOffside,
									ownGoals: v.guestOwnGoals	
							}
							
							matchIdsList.push(v.id)
							importTeamDataList.push(hostItem)
							importTeamDataList.push(guestItem)
						})
						
						postData = {
							matchIdsList: matchIdsList,
							importTeamDataList:importTeamDataList
						}
						//console.log(postData)
						
						var url = domain + path + 'saveMatchScoresResult' + suffix;
						$.postJSON(url, postData, function(data) {
							
							if(data.status =='success'){
								alert(data.message);
								vue.$data.selectRoundMatches = null
								vue.$data.selectedRound = '请选择轮次'
							}else{
								alert(data.message);
							}
						});  
					},
					beginRecord : function(){
						$('#playerSelectArea').fadeOut();
						$("#mainArea").fadeIn();
						
						$.each(vue.$data.selectedHostPlayer, function(i,v){
							v.playerId = v.id
				        	v.tournamentMatchId = vue.$data.selectedMatch
				        	v.teamId = vue.$data.hostTeamId
				        	$.each(vue.$data.statsContent, function(item,value){
				        		if(value){
				        			v[''+item] = 0	
				       			}
				       		})
				       		delete v.number;
				        	delete v.name;
				        	delete v.imgUrl;
				       		delete v.id;
				       	})
				       	$.each(vue.$data.selectedGuestPlayer, function(i,v){
				       		v.playerId = v.id
				        	v.tournamentMatchId = vue.$data.selectedMatch
				        	v.teamId = vue.$data.guestTeamId
				        	$.each(vue.$data.statsContent, function(item,value){
				        		if(value){
				        			v[''+item] = 0	
				       			}
				       		})
				       		delete v.number;
				        	delete v.name;
				        	delete v.imgUrl;
				       		delete v.id;
				       	})
					},
					savePlayerMatchRecord : function(){
						vue.$data.allSelectedPlayer = vue.$data.selectedHostPlayer.concat(vue.$data.selectedGuestPlayer)	
						console.log(vue.$data.allSelectedPlayer)
						
						//球员各项数据统计
						var saveMatchDataStatisticsUrl = domain + path + 'saveTournamentMatchPlayerDataStatistics' + suffix
						var parameter = {
								importPlayerDataList : vue.$data.allSelectedPlayer,
								matchId : vue.$data.selectedMatch
								//importTeamDataList : vm.$data.importTeamDataList
						};

						$.postJSON(saveMatchDataStatisticsUrl, parameter, function(data) {
													
							if(data.status =='success'){
								alert(data.message);
								vue.$data.selectedHostPlayer = []
								vue.$data.selectedGuestPlayer = []
								vue.$data.allSelectedPlayer = []
								$("#mainArea").fadeOut();
							}else{
								alert(data.message);
								$("#mainArea").fadeOut();
							}						
						}); 
												
						
					}
					
				},
				watch : {
					allHost : function(val) {
						switch (val) {
						case true:
							$.each(vue.$data.hostPlayerList, function(i,v){
								vue.$data.selectedHostPlayer.push(v);
							})
							break;
						case false:
							vue._data.selectedHostPlayer =[] 
							break;
						default:
						}
					},
					allGuest : function(val) {
						switch (val) {
						case true:
							$.each(vue.$data.guestPlayerList, function(i,v){
								vue.$data.selectedGuestPlayer.push(v);
							})
							break;
						case false:
							vue._data.selectedGuestPlayer =[] 
							break;
						default:
						}
					},
					selectedTournament : function() {
						//console.log(this.selectedTournament);
						this.matchList = [];
						this.selectedMatch = '';
						this.videoList = [];
			    	    
						this.selectName = null;
			    	    this.selectUrl = '';
			    	    this.selectedMatchType = "0";
			    	    this.selectThumbnailURL = null;
			    	    this.selectVideoId = null;
			    	    this.thumbnailURLMessage = "";
			    	    this.submitLabel = '增加'

						if (!isNaN(this.selectedTournament)) {
							//ajax call
							getMatchListUrl = domain + path + 'getTournamentMatchListByTournamentId' + `/${this.selectedTournament}` + suffix;
							axios.get(getMatchListUrl).then(function (response) {
								//console.log(response);
								vue.$data.matchList = response.data.list;
								
								vue.$data.roundList= _.chain(vue.$data.matchList).groupBy('name').map(function(value, key) {
		                            return {
		                                name: Number(key.replace(/[^0-9]/ig,"")),
		                                items: _.chain(value).sortBy('time').reverse().value()
		                                	//_.sortBy(value, 'totalPoints').reverse()
		                            }
		                   		}).sortBy('name').value()
							});
							this.queryVideoList();
						}
					},
					selectedMatch : function() {
						//vue.$data.selectedRound = '请选择轮次'
						
						$('#playerSelectArea').fadeIn();
						$("#mainArea").fadeOut();
						
						var that = this,
							match = _(this.matchList).chain().filter(function(item) {
							return item.id == that.selectedMatch;
						}).first().value();
						if (match) {
							vue.$data.selectName = match.displayName;
							vue.$data.selectDate = match.displayTime;
							
							vue.$data.hostTeamId = match.hostTeamId
							vue.$data.hostTeamLabel = match.hostTeamLabel
							vue.$data.guestTeamId = match.guestTeamId
							vue.$data.guestTeamLabel = match.guestTeamLabel
							vue.$data.roundLabel = match.name
							vue.$data.hostTeamLogo = match.hostTeamLogo
							vue.$data.guestTeamLogo = match.guestTeamLogo
							
							
							if(vue.$data.hostTeamId && vue.$data.guestTeamId){
								TeamUrl=  domain + path +'getTournamentMatchTeamPlayerInfos/'+ vue.$data.selectedTournament +'/' + match.id +suffix
								$.GetJSON(TeamUrl, null,function(data) {
									 if (data) {
										 hostList = data.hostTeamPlayerInfoList;
										 hostPlayerList = [];
										 $.each(hostList, function(i,v){
											 var player = {}
											 player.number = v.number
											 player.name = v.playerName
											 player.id  = v.playerId
											 player.teamId = vue.$data.hostTeamId
											 if(v.playerImg){
												 player.imgUrl = v.playerImg.indexOf('mmopen')>0 ? v.playerImg : 'http://static.footballer.cc/'+v.playerImg	 
											 }else{
												 player.imgUrl = '../img/app/football_career_edited_2.png'
											 }
											 hostPlayerList.push(player);
										 })
										 vue.$data.hostPlayerList = _.sortBy(hostPlayerList, 'number');
										 
										 guestList = data.guestTeamPlayerInfoList;
										 guestPlayerList = [];
										 $.each(guestList, function(i,v){
											 var player = {}
											 player.number = v.number
											 player.name = v.playerName
											 player.id  = v.playerId
											 player.teamId = vue.$data.guestTeamId
											 if(v.playerImg){
												 player.imgUrl = v.playerImg.indexOf('mmopen')>0 ? v.playerImg : 'http://static.footballer.cc/'+v.playerImg	 
											 }else{
												 player.imgUrl = '../img/app/football_career_edited_2.png'
											 }
											 guestPlayerList.push(player);
										 })
										 vue.$data.guestPlayerList = _.sortBy(guestPlayerList, 'number');
										 
										 setTimeout(function() {
											 var hostTeamInfo = _.where(vue._data.tournamentTeamBaseInfoList, {teamId: vue.$data.hostTeamId});
											 $('#hostTeam').text(vue.$data.hostTeamLabel);
											 vue.$data.hostTeamLogo = 'http://static.footballer.cc/'+vue.$data.hostTeamLogo
											 $('#hostTeamLogo').attr("src", vue.$data.hostTeamLogo);
											 $('#titleHostTeamLogo').attr("src", vue.$data.hostTeamLogo);
											 
											 var guestTeamInfo = _.where(vue._data.tournamentTeamBaseInfoList, {teamId: vue.$data.guestTeamId});
											 $('#guestTeam').text(vue.$data.guestTeamLabel);
											 vue.$data.guestTeamLogo = 'http://static.footballer.cc/'+vue.$data.guestTeamLogo
											 $('#guestTeamLogo').attr("src", vue.$data.guestTeamLogo);
											 $('#titleGuestTeamLogo').attr("src", vue.$data.guestTeamLogo);
										 }, 200);
									 } 
								});	
							}
						}
					},
					selectedRound : function() {
						//vue.$data.selectedMatch = '请选择比赛'
						//$('#playerSelectArea').hide();
						//$("#mainArea").fadeOut();
						/* if($('#playerSelectArea').is(":visible")){
							$('#playerSelectArea').hide()	
						}
						if($("#mainArea").is(":visible")){
							$("#mainArea").hide();
						} */
						
						var selectRound = _.findWhere(vue.$data.roundList, {name: this.selectedRound})
						if(selectRound){
							vue.$data.selectRoundMatches =selectRound.items	
						}else{
							vue.$data.selectRoundMatches =null	
						}
						
					},
					selectedMatchType : function() {
						if (isNaN(this.selectedTournament)) {
							return;
						}
						var $match = $('#match');
						if ("0" == this.selectedMatchType) {
							$match.prop('required', 'required')							
						} else {
							$match.removeAttr('required')	
						}
					}					
				},
				attached : function() {
					/* axios.get(getTournamentListUrl).then(function (response) {
						//console.log(response);
						vue.$data.tournamentList = response.data.tournamentsList;
					}); */
				}
			});

			tournamentMgmtLoginStatusCheck(pageInit);
			 
			function pageInit(){
				htmlHeaderInit()
				vue.init();
			}
			
			function htmlHeaderInit(){
				var storage = window.localStorage;
				var adminName = storage["adminName"]
				var tournamentId = storage['tournamentId']
				var tournamentName = storage["tournamentName"] 
				var tournamentLogo = storage["tournamentLogo"]
				
				$('a.logo').text(tournamentName)
				$('#tournamentLogo').attr('src', 'http://static.footballer.cc/'+tournamentLogo).attr('display','block');
				$('body#reservation').css('background-image', 'url(http://static.footballer.cc/'+tournamentLogo+')');
				$('body#reservation').css('background-repeat', 'space');
				//$('body#reservation').css('background-blend-mode','overlay');
				$('body#reservation').css('background-blend-mode','screen');
				$('body#reservation').css('background-size', 'cover');
				$('#adminName').text(adminName)
				
				
				var url = domain + path + 'getTournamentStatsContent/' + tournamentId + suffix;
				$.GetJSON(url, null, function(data) {
					
					if(data.status =='success'){
						vue.$data.statsContent = data.statsContent
					}else{
						alert(data.message);
					}
				});
			}
			
			
		};
	</script>



</html>