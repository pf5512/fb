<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Automation Configuration</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width">
<link rel="icon" href="../img/analysis/auf_title.png" type="image/x-icon"/>
<link rel="stylesheet" href="../css/fakeLoader.min.css">
<link rel="stylesheet" type="text/css" href="../css/justin_common.css">
<link rel="stylesheet" type="text/css" href="../css/button.min.css">
<link href="../css/jquery-ui.dialog.1.11.4.min.css" rel="stylesheet" type="text/css">

<script src="assets/javascripts/1.3.0/adminflare-demo-init.min.js" type="text/javascript"></script>
<script type="text/javascript">
	// Include Bootstrap stylesheet 
	document
			.write('<link href="assets/css/' + DEMO_ADMINFLARE_VERSION + '/' + DEMO_CURRENT_THEME + '/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" id="bootstrap-css">');
	// Include AdminFlare stylesheet 
	document
			.write('<link href="assets/css/' + DEMO_ADMINFLARE_VERSION + '/' + DEMO_CURRENT_THEME + '/adminflare.min.css" media="all" rel="stylesheet" type="text/css" id="adminflare-css">');
</script>
<script src="assets/javascripts/1.3.0/modernizr-jquery.min.js" type="text/javascript"></script>
<script src="assets/javascripts/1.3.0/adminflare-demo.min.js" type="text/javascript"></script>
<script src="assets/javascripts/1.3.0/bootstrap.min.js" type="text/javascript"></script>
<script src="assets/javascripts/1.3.0/adminflare.min.js" type="text/javascript"></script>


<script src="assets/javascripts/vue.min.js" type="text/javascript"></script>
<script src="../js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="../js/justin_common.js" type="text/javascript"></script>
<script src="../mobile/js/lib/underscore-min.js" type="text/javascript"></script>
<script src="../js/fakeLoader.min.js" type="text/javascript"></script>
<script src="../js/jquery-ui.dialog.1.11.4.min.js" type="text/javascript"></script>


<script type="text/javascript">
	$(document).ready(function() {
		prettyPrint();
	});
</script>
</head>
<body>
	<div id="fakeLoader" style="display:none;"></div>
	<script type="text/javascript">
		demoSetBodyLayout();
	</script>
	<!-- Main navigation bar  ================================================== -->
	
	
	<header class="navbar navbar-fixed-top" id="main-navbar">
		<div class="navbar-inner">
			<div class="container">
				<img id="arenaLogo" onerror="this.style.display='none'"  style="float: left;margin: 6px 0px 0px 5px;width: 28px;height: 28px;">
				<a class="logo"
					style="width: 200px;color: cornsilk; font-size: 15px;font-weight: bold; margin: 10px 8px 0px 8px;">Auf-Backend</a>
				<a class="btn nav-button collapsed" data-toggle="collapse"
					data-target=".nav-collapse"> <span class="icon-reorder"></span>
				</a>

				<div class="nav-collapse collapse">
					<ul class="nav">
						<li class="active">
							<a href="/footballer/backadmin/fieldReservation.html">预定</a></li>
						<li class="complete">
							<a href="/footballer/backadmin/battleMgmt.html" style="color: greenyellow;">约战</a></li>
						<li class="complete">
							<a href="/footballer/backadmin/soloMgmt.html" style="color: aqua;">单飞</a></li>
						<li class="divider-vertical"></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">管理<i class=" icon-caret-down"></i></a>
							<ul class="dropdown-menu">
								<li><a href="/footballer/backadmin/memberList.html">会员</a></li>
								<li><a href="/footballer/backadmin/nonmemberList.html">用户</a></li>
								<li><a href="/footballer/backadmin/fieldManagement.html">场次/价格</a></li>
								<li class="divider"></li>
								<li class="nav-header">高级功能</li>
								<li><a href="/footballer/backadmin/dataStatistics.html">数据统计</a></li>
								<li><a href="/footballer/backadmin/automationConfig.html">固定场次自动预定</a></li>
							</ul></li>
						<li class="divider-vertical"></li>
					</ul>
					<!-- <form class="navbar-search pull-left" action="" _lpchecked="1">
						<input type="text" class="search-query" placeholder="Search" style="width: 120px">
					</form> -->
					<ul class="nav pull-right">
						<li>
							<!-- <ul class="messages">
								<li><a href="#"><i class="icon-warning-sign"></i> 2<span class="responsive-text"> alerts</span></a></li>
								<li><a href="#"><i class="icon-envelope"></i> 25<span class="responsive-text"> new messages</span></a></li>
							</ul> -->
						</li>
						<li class="separator"></li>
						<li class="dropdown">
							<img onerror="this.style.display='none'" class="headIcon" src="../img/common/admin_spy.png" style="margin: 3px 0 0 1px;">
							<a href="#" class="dropdown-toggle usermenu" data-toggle="dropdown"> 
								<span id="adminName" style="width: 100px;display: block;">管理员名</span>
							</a>
							<ul class="dropdown-menu">
								<li><a onclick="updatePwdPopup();" href="#">修改密码</a></li>
								<!-- <li><a href="#">设置</a></li> -->
								<li class="divider"></li>
								<li><a onclick="loginOut();" href="/footballer/backadmin/fieldReservation.html" >登出</a></li>
							</ul>
					</ul>
				</div>
			</div>
		</div>
	</header>
	<!-- / Main navigation bar -->

	<div id="dialog-form" title="请先登陆"  style="display:none;">
		  <p class="validateTips"></p>
		 
		  <form>
		    <fieldset>
		      <div class="HBox">
		      	<label for="name">用户</label>
		      	<input type="text" name="name" id="name"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <br>
		      <div class="HBox">
		      	<label for="password">密码</label>
		      	<input type="password" name="password" id="password"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <!-- Allow form submission with keyboard without duplicating the dialog button -->
		      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
		    </fieldset>
		  </form>
	</div>
	
	<div id="dialog-updatePwd" title="修改密码"  style="display:none;">
		  <p class="validateTips"></p>
		 
		  <form>
		    <fieldset>
		      <div class="HBox">
		      	<label for="newPwd" class="forInput">新密码</label>
		      	<input type="password" name="newPwd" id="newPwd"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <br>
		      <div class="HBox">
		      	<label for="confirmPwd" class="forInput">确认密码</label>
		      	<input type="password" name="confirmPwd" id="confirmPwd"  class="text ui-widget-content ui-corner-all">
		      </div>
		      <!-- Allow form submission with keyboard without duplicating the dialog button -->
		      <input type="submit" tabindex="-1" style="position:absolute; top:-1000px">
		    </fieldset>
		  </form>
	</div>


	<section class="container" id="app">
	
		<section class="row-fluid">
			<h3 class="box-header">智能预定系统</h3>
			
			<div class="box">
				<div class="HBox">
					<img src="../img/backend/task.png" alt="error" class="titleIcon"/>
					<label class="sectionTitle">周任务-每周五23：00 执行（完成两周后的固定预定任务） </label>
					<a v-on:click="showAutoJob" class="button button-primary button-rounded button-tiny" style="margin-top: 2px;">新建任务</a>
				</div>
				<div id="addArea" class="hideBox">
					<table class="solidBorder">
						<tr>
							<td><label class="forSelect">定场人</label></td>
							<td colspan="2">
								<select  style="width:260px;margin-right: 10px;" v-on:change="selectPlayerChange">
									<option value="0">请选择</option>
									<option v-for="ap in arenaPlayerList" v-bind:value="ap.playerId">
										<label class="outsetBlue">{{ap.name}}</label>
								        <label>{{ap.teams}}</label>
										<label>{{ap.cellphone}}</label>
									</option>
								</select>
							</td>
							<td>
								<div class="HBox">
									<label class="forSelect">类型</label>
									<input id="fullField" type="radio" value="fullField" v-model="reservationType" checked="checked">
									<label for="fullField" class="forRadio green">整场</label>
									
									<input id="battle" type="radio" value="battle" v-model="reservationType">
									<label for="battle" class="forRadio red">约战</label>
								</div>
							</td>
							<td><label class="forSelect">订场时间</label></td>
							<td>
								<select style="width:160px;" v-on:change="selectDayChange">
									<option value="2">星期一</option>
									<option value="3">星期二</option>
									<option value="4">星期三</option>
									<option value="5">星期四</option>
									<option value="6">星期五</option>
									<option value="7">星期六</option>
									<option value="1">星期日</option>
								</select>
							</td>
						</tr>
						<tr>	
							<td><label class="forSelect">场地</label></td>
							<td>
								<select  style="width:160px;" v-on:change="selectFieldNameChange">
									<option value="0">请选择</option>
									<option v-for="item in fieldIDNameList" v-bind:value="item.fieldId">{{item.name}}</option>
								</select>
							</td>
							<td><label class="forSelect">时间段</label></td>
							<td>
								<select  style="width:160px;" v-on:change="selectFieldTimeChange">
									<option v-for="item in fieldInfo" v-bind:value="item.id">{{item.disPlayStartTime}}-{{item.disPlayEndTime}}</option>
								</select>
							</td>
							<td>
							<!-- 	<div class="HBox" style="padding-left:15px;">
									
									<input type="checkbox" id="videoStatus" v-model="videoStatus">
									<label for="videoStatus" class="forCheckBox" style="padding-right: 2px;">视频服务</label>
									<img alt="video" style="width: 20px;height:20px; padding-bottom:4px;" src="assets/images/video.png">
								</div> -->
								
							</td>
							<td style="text-align: center;">
								<a v-on:click="createNewJob" class="button button-action button-rounded button-small" style="margin-bottom: 7px;">新增</a>
							</td>
							
						</tr>
					
					</table>
					<br>
				</div>
				<br></br>
				<table class="table table-hover">
						<thead>
							<tr>
								<th>#</th>
								<th style="width: 80px;">订场人</th>
								<th style="width: 120px;">队名</th>
								<th>电话</th>
								<th>类型</th>
								<th>场地</th>
								<th>使用时间</th>
								<th>时段</th>
								<!-- <th>视频服务</th> -->
								<th>任务状态</th>
								<!-- <th>录入时间</th> -->
								<th>操作</th>
							</tr>
						</thead>
						<tbody>
							<template v-for="row in automationReservationJobList">
							<tr>
								<td>{{$index+1}}</td>
								<td>{{row.playerName}}</td>
								<td>{{row.teamName}}</td>
								<td>{{row.cellphone}}</td>
								<td>
									<div v-if="row.type == 'fullField'" style="color:green;">整场</div>
									<div v-if="row.type == 'battle'" style="color:red;">约战</div>
								</td>
								<td>{{row.fieldName}}</td>
								<td >
									<div v-if="row.dayOfWeek == 1">每周日</div>
									<div v-if="row.dayOfWeek == 2">每周一</div>
									<div v-if="row.dayOfWeek == 3">每周二</div>
									<div v-if="row.dayOfWeek == 4">每周三</div>
									<div v-if="row.dayOfWeek == 5">每周四</div>
									<div v-if="row.dayOfWeek == 6">每周五</div>
									<div v-if="row.dayOfWeek == 7">每周六</div> 								
								</td>
								
								<td>{{row.startTime.substr(0,5)}} - {{row.endTime.substr(0,5)}} </td>
								<!-- <td>
									<div v-if="row.videoStatus == 'BOOK'" style="color:#4cb0f9;">BOOK</div>
									<div v-if="row.videoStatus == 'UNBOOK'" style="color:grey;">/</div>
								</td> -->
								<td>
									<div v-if="row.jobStatus == 'ACTIVE'" style="color:green;">ACTIVE</div>
									<div v-if="row.jobStatus == 'INACTIVE'" style="color:grey;">INACTIVE</div>	
								</td>
								<!-- <td>{{row.disPlayCreateDt}}</td> -->
								<td>
									<div class="HBox">
										<div v-if="row.jobStatus == 'ACTIVE'" style="margin-right:5px;">
											<a id="{{row.id}}" v-on:click="suspendBtn" class="button button-highlight button-rounded button-tiny">暂停</a>
										</div>
										<div v-if="row.jobStatus == 'INACTIVE'" style="margin-right:5px;">
											<a id="{{row.id}}" v-on:click="resumeBtn" class="button button-action button-rounded button-tiny">恢复</a>
										</div>
										<a id="{{row.id}}" v-on:click="deleteBtn" class="button button-caution button-rounded button-tiny">移除</a>
									</div>
								</td>
							</tr>
							</template>
						</tbody>
					</table>
			</div>
		</section>

		<section class="row-fluid" style="display:none;">
			<h3 class="box-header">Statistics</h3>
			<div class="box">
				
			</div>
		</section>

		<!-- Page footer ================================================== -->
		
		<footer id="main-footer">
			Copyright © 2015 <!-- <a href="http://www.footballer.cc"> -->成都傲赴体育有限公司 
			all rights reserved. <a href="#" class="pull-right" id="on-top-link">
				On Top &nbsp;<i class="icon-chevron-up"></i>
			</a>
		</footer>
		<!-- / Page footer -->
	</section>
</body>
<script type="text/javascript">
	(function() {
		var arenaId;
		var urlPre ='',iaa='';
/*		
		var temp ={"status":"success","statisticsList":["1月-18-12-4-1-1","2月-18-12-3-2-1","3月-0-0-0-0-0","4月-0-0-0-0-0","5月-0-0-0-0-0","6月-0-0-0-0-0","7月-0-0-0-0-0","8月-0-0-0-0-0","9月-0-0-0-0-0","10月-0-0-0-0-0","11月-3-3-0-0-0","12月-0-0-0-0-0","-","1季度-36-24-7-3-2","2季度-0-0-0-0-0","3季度-0-0-0-0-0","4季度-3-3-0-0-0"]};
		var testdata = {"status":"success","arenaUserReservationStatisticsList":[{"id":null,"arenaId":null,"playerId":111,"memberId":null,"number":null,"name":"张先生","teams":"益佳汽修","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":73,"memberId":null,"number":null,"name":"钟先生","teams":"6780聚乐部","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":69,"memberId":null,"number":null,"name":"杨世奇","teams":"左脚右脚","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":87,"memberId":null,"number":null,"name":"薛嵘俊","teams":"叔叔不约","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":80,"memberId":null,"number":null,"name":"万先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":112,"memberId":null,"number":null,"name":"梁峰","teams":"卓锦城","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":1,"battleBookNumber":0,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":58,"memberId":null,"number":13,"name":"敬明俊","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":1,"battleBookNumber":0,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":105,"memberId":null,"number":null,"name":"小稂","teams":"甲乙丙丁","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":1,"battleBookNumber":0,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":52,"memberId":null,"number":7,"name":"黄璜","teams":"东山坡","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":109,"memberId":null,"number":23,"name":"雷宇","teams":"SPA","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":84,"memberId":null,"number":null,"name":"蒲先生_小胖_每周五20点","teams":"银河战舰队","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":49,"memberId":null,"number":4,"name":"陈俊","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":1,"battleBookNumber":0,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":110,"memberId":null,"number":null,"name":"曾欢欢","teams":"锦江城市花园队","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":1,"battleBookNumber":0,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":86,"memberId":null,"number":null,"name":"刘先生","teams":"金刚芭比队","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":79,"memberId":null,"number":null,"name":"苏先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":1,"bookTotalNumber":1},{"id":null,"arenaId":null,"playerId":60,"memberId":null,"number":15,"name":"周宇","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":76,"memberId":null,"number":null,"name":"郭先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":57,"memberId":null,"number":12,"name":"曹代强","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":102,"memberId":null,"number":null,"name":"Test","teams":"Test","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":54,"memberId":null,"number":9,"name":"唐玮俊","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":51,"memberId":null,"number":6,"name":"宋雨","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":67,"memberId":null,"number":22,"name":"阿杰","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":83,"memberId":null,"number":null,"name":"赵先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":64,"memberId":null,"number":19,"name":"黄禹","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":48,"memberId":null,"number":3,"name":"陈开弟","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":61,"memberId":null,"number":16,"name":"陈东","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":77,"memberId":null,"number":null,"name":"贺先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":74,"memberId":null,"number":null,"name":"杜先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":55,"memberId":null,"number":10,"name":"李一川","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":70,"memberId":null,"number":null,"name":"陈睿","teams":"洪河老友记","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":89,"memberId":null,"number":null,"name":"俸先生","teams":"一塌糊涂","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":65,"memberId":null,"number":20,"name":"陈煜","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":81,"memberId":null,"number":null,"name":"王先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":62,"memberId":null,"number":17,"name":"钟坤","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":78,"memberId":null,"number":null,"name":"交行","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":1,"memberId":null,"number":1,"name":"保留号","teams":"踢球者,Madrid,t1,踢球者二队","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":59,"memberId":null,"number":14,"name":"贾韬","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":75,"memberId":null,"number":null,"name":"桂先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":56,"memberId":null,"number":11,"name":"黄俊","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":72,"memberId":null,"number":null,"name":"袁先生","teams":"东拉西扯","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":90,"memberId":null,"number":null,"name":"张仁数","teams":"龙城一号","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":53,"memberId":null,"number":8,"name":"何天野","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":68,"memberId":null,"number":null,"name":"宁先生","teams":"草木人禾","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":50,"memberId":null,"number":5,"name":"焦坤","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":66,"memberId":null,"number":21,"name":"刘同","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":82,"memberId":null,"number":null,"name":"徐先生","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":63,"memberId":null,"number":18,"name":"曾勇","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0},{"id":null,"arenaId":null,"playerId":47,"memberId":null,"number":2,"name":"廖敏魁","teams":"/","level":null,"disCount":null,"balance":null,"wechatNo":null,"cellphone":null,"createDt":null,"fullFieldBookNumber":0,"battleBookNumber":0,"bookTotalNumber":0}]};
		var tempArenaUser={"status":"success","arenaUsers":[{"arenaId":null,"playerId":84,"name":"/","teams":"装饰队","cellphone":18628938602,"wechatNo":null,"member":false},{"arenaId":52,"playerId":67,"name":"阿杰","teams":"/","cellphone":13222222222,"wechatNo":null,"member":true},{"arenaId":52,"playerId":1,"name":"保留为测试号","teams":"Madrid,踢球者","cellphone":null,"wechatNo":null,"member":true},{"arenaId":52,"playerId":57,"name":"曹代强","teams":"/","cellphone":13882185327,"wechatNo":null,"member":true},{"arenaId":52,"playerId":61,"name":"陈东","teams":"/","cellphone":13541258155,"wechatNo":null,"member":true},{"arenaId":52,"playerId":49,"name":"陈俊","teams":"/","cellphone":13679055317,"wechatNo":"","member":true},{"arenaId":52,"playerId":48,"name":"陈开弟","teams":"/","cellphone":13518162188,"wechatNo":null,"member":true},{"arenaId":52,"playerId":65,"name":"陈煜","teams":"/","cellphone":13688038606,"wechatNo":null,"member":true},{"arenaId":null,"playerId":70,"name":"陈睿","teams":"洪河老友记","cellphone":13808195482,"wechatNo":"chenrui820802","member":false},{"arenaId":null,"playerId":74,"name":"杜先生","teams":"/","cellphone":15908186974,"wechatNo":"","member":false},{"arenaId":null,"playerId":75,"name":"桂先生","teams":"/","cellphone":13111866186,"wechatNo":null,"member":false},{"arenaId":null,"playerId":76,"name":"郭先生","teams":"/","cellphone":18602804631,"wechatNo":null,"member":false},{"arenaId":52,"playerId":53,"name":"何天野","teams":"/","cellphone":18628124233,"wechatNo":null,"member":true},{"arenaId":null,"playerId":77,"name":"贺先生","teams":"/","cellphone":15908127300,"wechatNo":null,"member":false},{"arenaId":52,"playerId":56,"name":"黄俊","teams":"/","cellphone":18628285329,"wechatNo":null,"member":true},{"arenaId":52,"playerId":64,"name":"黄禹","teams":"/","cellphone":15528216252,"wechatNo":null,"member":true},{"arenaId":52,"playerId":52,"name":"黄璜","teams":"/","cellphone":18982063818,"wechatNo":null,"member":true},{"arenaId":52,"playerId":59,"name":"贾韬","teams":"/","cellphone":13980475171,"wechatNo":null,"member":true},{"arenaId":52,"playerId":50,"name":"焦坤","teams":"/","cellphone":18615700025,"wechatNo":null,"member":true},{"arenaId":null,"playerId":78,"name":"交行","teams":"/","cellphone":15228819173,"wechatNo":null,"member":false},{"arenaId":52,"playerId":58,"name":"敬明俊","teams":"/","cellphone":18080811928,"wechatNo":null,"member":true},{"arenaId":52,"playerId":55,"name":"李一川","teams":"/","cellphone":13981712102,"wechatNo":null,"member":true},{"arenaId":52,"playerId":47,"name":"廖敏魁","teams":"/","cellphone":13981716398,"wechatNo":"/","member":true},{"arenaId":52,"playerId":66,"name":"刘同","teams":"/","cellphone":13111111111,"wechatNo":null,"member":true},{"arenaId":null,"playerId":86,"name":"刘先生","teams":"金刚芭比队","cellphone":15928077164,"wechatNo":null,"member":false},{"arenaId":null,"playerId":68,"name":"宁先生","teams":"草木人禾","cellphone":13980882803,"wechatNo":null,"member":false},{"arenaId":52,"playerId":51,"name":"宋雨","teams":"/","cellphone":18781947673,"wechatNo":null,"member":true},{"arenaId":null,"playerId":79,"name":"苏先生","teams":"/","cellphone":18782263332,"wechatNo":null,"member":false},{"arenaId":52,"playerId":54,"name":"唐玮俊","teams":"/","cellphone":13551239972,"wechatNo":null,"member":true},{"arenaId":null,"playerId":80,"name":"万先生","teams":"/","cellphone":15882118272,"wechatNo":null,"member":false},{"arenaId":null,"playerId":81,"name":"王先生","teams":"/","cellphone":18190872325,"wechatNo":null,"member":false},{"arenaId":null,"playerId":82,"name":"徐先生","teams":"/","cellphone":13408582947,"wechatNo":null,"member":false},{"arenaId":null,"playerId":87,"name":"薛嵘俊","teams":"叔叔不约","cellphone":18321374821,"wechatNo":"chevrillon","member":false},{"arenaId":null,"playerId":69,"name":"杨世奇","teams":"左脚右脚","cellphone":13568943137,"wechatNo":"y136984853","member":false},{"arenaId":null,"playerId":72,"name":"袁先生","teams":"东拉西扯","cellphone":18602824292,"wechatNo":"lex1948","member":false},{"arenaId":52,"playerId":63,"name":"曾勇","teams":"/","cellphone":18123377573,"wechatNo":null,"member":true},{"arenaId":null,"playerId":90,"name":"张仁数","teams":"龙城一号","cellphone":18682655030,"wechatNo":null,"member":false},{"arenaId":null,"playerId":83,"name":"赵先生","teams":"/","cellphone":18349330258,"wechatNo":null,"member":false},{"arenaId":52,"playerId":62,"name":"钟坤","teams":"/","cellphone":13882266231,"wechatNo":null,"member":true},{"arenaId":null,"playerId":73,"name":"钟先生","teams":"6780聚乐部","cellphone":13555555555,"wechatNo":"CD6780-99","member":false},{"arenaId":52,"playerId":60,"name":"周宇","teams":"/","cellphone":18602808856,"wechatNo":null,"member":true},{"arenaId":null,"playerId":89,"name":"俸先生","teams":"一塌糊涂","cellphone":13810000050,"wechatNo":"13810000050","member":false}]};
 */		
		
		var vm = new Vue(
				{
					el : '#app',
					data : {
						createNewAutoJobUrl:null,
						automationReservationJobList:[],
						arenaPlayerList:[],
						arenaFieldStandardList:[],
						fieldIDNameList:[],
						selectedFieldId:null,
						selectedPlayerId:null,
						selectedDay:1,
						selectedFCSId:null,
						reservationType:null,
						videoStatus:0,
						fieldInfo:[]
					},
					watch : {},
					methods : {
						init:function(){
							arenaId = window.localStorage["arenaId"]
							urlPre = window.localStorage["urlPre"]
					 		iaa = window.localStorage["iaa"]
							
							vm.$data.createNewAutoJobUrl = urlPre+'reservation-service/createAutoReservationJob'+iaa
						},
						showAutoJob:function(){
							$('#addArea').toggle();
						},
						selectPlayerChange:function(e){
							vm.$data.selectedPlayerId = Number(e.target.value) 
						},
						selectDayChange:function(e){
							vm.$data.selectedDay = Number(e.target.value)
						},
						selectFieldNameChange: function(e){
							
							vm.$data.selectedFieldId = Number(e.target.value) 
							if(vm.$data.selectedFieldId == '0'){
								return
							}
							 
							vm.$data.fieldInfo = _.where(vm.$data.arenaFieldStandardList, {fieldId: vm.$data.selectedFieldId});
							console.log(vm.$data.fieldInfo);
						},
						selectFieldTimeChange:function(e){
							vm.$data.selectedFCSId = Number(e.target.value) 
						},
						createNewJob:function(){
							if(vm.$data.selectedPlayerId != null && vm.$data.selectedDay != null && vm.$data.selectedFieldId !=null && vm.$data.selectedFCSId !=null){
								var parameters = {};
								parameters.arenaId = arenaId
								parameters.playerId = vm.$data.selectedPlayerId
								parameters.dayOfWeek = vm.$data.selectedDay
								parameters.fieldId = vm.$data.selectedFieldId
								parameters.fcsId = vm.$data.selectedFCSId
								parameters.type = vm.$data.reservationType
								parameters.videoStatus = Number(vm.$data.videoStatus) 
								loading();
								$.postJSON(vm._data.createNewAutoJobUrl, parameters,function(data) {
									
								 	if (data) {
								 		$('#addArea').toggle();
								 		vm.getAutomationJobList();
								 	}
								 });
							}else{
								alert('parameter can not null or undefine');
							}
						},
						suspendBtn:function(e){
							var suspendAutoJobId = e.target.id;
							var url =  urlPre+'reservation-service/suspendAutoReservationJobById/'+ suspendAutoJobId +iaa
							loading();
							$.postJSON(url, null,function(data) {
							 	if (data) {
							 		vm.getAutomationJobList();
							 	}
							 });
						},
						resumeBtn:function(e){
							var resumeAutoJobId = e.target.id;
							var url =  urlPre+'reservation-service/resumeAutoReservationJobById/'+ resumeAutoJobId +iaa
							loading();
							$.postJSON(url, null,function(data) {
							 	if (data) {
							 		vm.getAutomationJobList();
							 	}
							 });
						},
						deleteBtn:function(e){
							var deleteAutoJobId = e.target.id;
							var url =  urlPre+'reservation-service/deleteAutoReservationJobById/'+ deleteAutoJobId +iaa
							loading();
							$.deleteJSON(url, null,function(data) {
							 	if (data) {
							 		vm.getAutomationJobList();
							 	}
							 });
						},
						getAutomationJobList : function() {
 							loading();	 
 							var getAutomationJobListUrl= urlPre+'reservation-service/getAutomationReservationJobList/'+ arenaId +iaa
							 $.GetJSON(getAutomationJobListUrl, null,function(data) {
								if (data) {
									vm.$data.automationReservationJobList = data.automationReservationJobList;
									hideLoading();
								}
							});    
							
							/* 测试
							var testData ={"status":"success","automationReservationJobList":[{"id":3,"arenaId":null,"type":"fullField","fieldId":38,"fieldChargeStandardId":null,"playerId":86,"bookStatus":null,"dayOfWeek":5,"paymentStatus":null,"videoStatus":"BOOK","jobStatus":"ACTIVE","createDt":1460304000000,"disPlayCreateDt":"4月11日 星期一 00:00","playerName":"刘先生","fieldName":"3号球场","cellphone":"15928077164","teamName":"金刚芭比队","startTime":"16:00:00","endTime":"18:00:00"},{"id":2,"arenaId":null,"type":"battle","fieldId":38,"fieldChargeStandardId":null,"playerId":1,"bookStatus":null,"dayOfWeek":1,"paymentStatus":null,"videoStatus":"BOOK","jobStatus":"ACTIVE","createDt":1460304000000,"disPlayCreateDt":"4月11日 星期一 00:00","playerName":"来碗豆腐司机","fieldName":"3号球场","cellphone":"18180629919","teamName":"踢球者,Madrid,踢球者二队,t1","startTime":"18:00:00","endTime":"19:30:00"},{"id":1,"arenaId":null,"type":"fullField","fieldId":36,"fieldChargeStandardId":null,"playerId":67,"bookStatus":null,"dayOfWeek":1,"paymentStatus":null,"videoStatus":"UNBOOK","jobStatus":"ACTIVE","createDt":null,"disPlayCreateDt":"4月11日 星期一 12:05","playerName":"阿杰","fieldName":"1号球场","cellphone":"13222222222","teamName":"/","startTime":"19:30:00","endTime":"21:00:00"}]}
							vm.$data.automationReservationJobList = testData.automationReservationJobList; */ 
						},
						getArenaPlayerList: function(){
							var getArenaPlayerListUrl = urlPre+'player-service/getArenaPlayerList/'+ arenaId +iaa
 							$.GetJSON(getArenaPlayerListUrl, null,function(data) {
								 if (data) {
									 vm._data.arenaPlayerList = data.arenaUsers;
								 } 
							}); 	 	
							
							//测试
							//vm._data.arenaPlayerList = tempArenaUser.arenaUsers;
						},
						getArenaFieldStandardList:function(){
							var getArenaFieldStandardUrl= urlPre+'arenaField-service/getArenaFieldsStandards/'+ arenaId +iaa
 							$.GetJSON(getArenaFieldStandardUrl, null,function(data) {
								 if (data) {
									 vm._data.arenaFieldStandardList = data.fieldChargeStandardList;
									 
									 //将数据归类
									 vm._data.fieldIDNameList = _.uniq(vm._data.arenaFieldStandardList, 'name');
									 //console.log(uniqList);
								 } 
							});	 
							
							/* 测试
							var test1 = {"status":"success","message":null,"fieldChargeStandard":null,"fieldChargeStandardList":[{"id":1,"arenaId":52,"fieldId":36,"startTime":7200000,"endTime":14400000,"disPlayStartTime":"10:00","disPlayEndTime":"12:00","price":200,"barginPrice":100,"name":"1号球场"},{"id":2,"arenaId":52,"fieldId":36,"startTime":14400000,"endTime":21600000,"disPlayStartTime":"12:00","disPlayEndTime":"14:00","price":200,"barginPrice":100,"name":"1号球场"},{"id":3,"arenaId":52,"fieldId":36,"startTime":21600000,"endTime":28800000,"disPlayStartTime":"14:00","disPlayEndTime":"16:00","price":200,"barginPrice":100,"name":"1号球场"},{"id":4,"arenaId":52,"fieldId":36,"startTime":28800000,"endTime":36000000,"disPlayStartTime":"16:00","disPlayEndTime":"18:00","price":200,"barginPrice":100,"name":"1号球场"},{"id":5,"arenaId":52,"fieldId":36,"startTime":36000000,"endTime":41400000,"disPlayStartTime":"18:00","disPlayEndTime":"19:30","price":300,"barginPrice":200,"name":"1号球场"},{"id":6,"arenaId":52,"fieldId":36,"startTime":41400000,"endTime":46800000,"disPlayStartTime":"19:30","disPlayEndTime":"21:00","price":300,"barginPrice":200,"name":"1号球场"},{"id":7,"arenaId":52,"fieldId":36,"startTime":46800000,"endTime":52200000,"disPlayStartTime":"21:00","disPlayEndTime":"22:30","price":300,"barginPrice":200,"name":"1号球场"},{"id":18,"arenaId":52,"fieldId":37,"startTime":7200000,"endTime":14400000,"disPlayStartTime":"10:00","disPlayEndTime":"12:00","price":200,"barginPrice":100,"name":"2号球场"},{"id":22,"arenaId":52,"fieldId":37,"startTime":14400000,"endTime":21600000,"disPlayStartTime":"12:00","disPlayEndTime":"14:00","price":200,"barginPrice":100,"name":"2号球场"},{"id":23,"arenaId":52,"fieldId":37,"startTime":21600000,"endTime":28800000,"disPlayStartTime":"14:00","disPlayEndTime":"16:00","price":200,"barginPrice":100,"name":"2号球场"},{"id":24,"arenaId":52,"fieldId":37,"startTime":28800000,"endTime":36000000,"disPlayStartTime":"16:00","disPlayEndTime":"18:00","price":200,"barginPrice":100,"name":"2号球场"},{"id":25,"arenaId":52,"fieldId":37,"startTime":36000000,"endTime":41400000,"disPlayStartTime":"18:00","disPlayEndTime":"19:30","price":300,"barginPrice":200,"name":"2号球场"},{"id":26,"arenaId":52,"fieldId":37,"startTime":41400000,"endTime":46800000,"disPlayStartTime":"19:30","disPlayEndTime":"21:00","price":300,"barginPrice":200,"name":"2号球场"},{"id":27,"arenaId":52,"fieldId":37,"startTime":46800000,"endTime":52200000,"disPlayStartTime":"21:00","disPlayEndTime":"22:30","price":300,"barginPrice":200,"name":"2号球场"},{"id":30,"arenaId":52,"fieldId":38,"startTime":7200000,"endTime":14400000,"disPlayStartTime":"10:00","disPlayEndTime":"12:00","price":200,"barginPrice":200,"name":"3号球场"},{"id":31,"arenaId":52,"fieldId":38,"startTime":14400000,"endTime":21600000,"disPlayStartTime":"12:00","disPlayEndTime":"14:00","price":300,"barginPrice":200,"name":"3号球场"},{"id":32,"arenaId":52,"fieldId":38,"startTime":21600000,"endTime":28800000,"disPlayStartTime":"14:00","disPlayEndTime":"16:00","price":300,"barginPrice":200,"name":"3号球场"},{"id":34,"arenaId":52,"fieldId":38,"startTime":28800000,"endTime":36000000,"disPlayStartTime":"16:00","disPlayEndTime":"18:00","price":200,"barginPrice":100,"name":"3号球场"},{"id":35,"arenaId":52,"fieldId":38,"startTime":36000000,"endTime":41400000,"disPlayStartTime":"18:00","disPlayEndTime":"19:30","price":300,"barginPrice":200,"name":"3号球场"},{"id":36,"arenaId":52,"fieldId":38,"startTime":41400000,"endTime":46800000,"disPlayStartTime":"19:30","disPlayEndTime":"21:00","price":300,"barginPrice":200,"name":"3号球场"},{"id":37,"arenaId":52,"fieldId":38,"startTime":46800000,"endTime":52200000,"disPlayStartTime":"21:00","disPlayEndTime":"22:30","price":300,"barginPrice":200,"name":"3号球场"},{"id":38,"arenaId":52,"fieldId":39,"startTime":7200000,"endTime":14400000,"disPlayStartTime":"10:00","disPlayEndTime":"12:00","price":300,"barginPrice":200,"name":"4号球场"},{"id":39,"arenaId":52,"fieldId":39,"startTime":14400000,"endTime":21600000,"disPlayStartTime":"12:00","disPlayEndTime":"14:00","price":300,"barginPrice":200,"name":"4号球场"},{"id":40,"arenaId":52,"fieldId":39,"startTime":21600000,"endTime":28800000,"disPlayStartTime":"14:00","disPlayEndTime":"16:00","price":300,"barginPrice":200,"name":"4号球场"},{"id":41,"arenaId":52,"fieldId":39,"startTime":28800000,"endTime":36000000,"disPlayStartTime":"16:00","disPlayEndTime":"18:00","price":200,"barginPrice":100,"name":"4号球场"},{"id":42,"arenaId":52,"fieldId":39,"startTime":36000000,"endTime":41400000,"disPlayStartTime":"18:00","disPlayEndTime":"19:30","price":300,"barginPrice":200,"name":"4号球场"},{"id":43,"arenaId":52,"fieldId":39,"startTime":41400000,"endTime":46800000,"disPlayStartTime":"19:30","disPlayEndTime":"21:00","price":300,"barginPrice":200,"name":"4号球场"},{"id":44,"arenaId":52,"fieldId":39,"startTime":46800000,"endTime":52200000,"disPlayStartTime":"21:00","disPlayEndTime":"22:30","price":300,"barginPrice":200,"name":"4号球场"}]};
							vm._data.arenaFieldStandardList = test1.fieldChargeStandardList
							vm._data.fieldIDNameList = _.uniq(vm._data.arenaFieldStandardList, 'name'); */
							//console.log(uniqList);
						},
						
					}
				});
 		
 		loginStatusCheck(pageInit);
 
		function pageInit(){
			loadingInit();
			vm.init()
			vm.getArenaPlayerList();
			vm.getArenaFieldStandardList();
			vm.getAutomationJobList();	
		}

	})()
</script>
</html>